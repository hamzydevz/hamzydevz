#!/bin/bash
# hamzy tols
BOT_TOKEN="8467371091:AAHltEVEpK_CBMsYB_OoMczwP-qXIRxWtdI"

# Warna
hijau='\033[0;32m'
merah='\033[0;31m'
kuning='\033[1;33m'
biru='\033[0;34m'
ungu='\033[0;35m'
cyan='\033[0;36m'
reset='\033[0m'

# Fungsi animasi loading
loading() {
    echo -ne "${kuning}Loading"
    for i in {1..5}; do
        echo -ne "."
        sleep 0.3
    done
    echo -e "${reset}"
}

# Loading awal
clear
loading
echo -e "${merah}SABAR YA CUY LAGI LOADING${reset}"
sleep 1
echo -e "${merah}JANGAN LUPA JOIN SALURAN DANXYOFFICIAL YA CUY${reset}"
termux-open-url "https://whatsapp.com/channel/0029VaznZlq7z4kW00unHZ0e"
sleep 1
echo -e "${biru}JOIN JUGA SALURAN KU CUY${reset}"
sleep 1
echo "sabar dikit lagi bang"
sleep 1

# Fungsi Menu
menu() {
    clear
    figlet "HamzyTools" | lolcat
    echo ""
    echo -e "${hijau}╔══════════════════════════════════════════════╗"
    echo -e "║${kuning} [1] SUNTIK TIKTOK                             ${hijau}║"
    echo -e "║${kuning} [2] CEK PROVIDER NOMOR                        ${hijau}║"
    echo -e "║${kuning} [3] ASCII ART GENERATOR                       ${hijau}║"
    echo -e "║${kuning} [4] INFO TOOLS                                ${hijau}║"
    echo -e "║${kuning} [5] SPAM TEXT TELEGRAM                        ${hijau}║"
    echo -e "║${kuning} [6] START BOT BUAT NOMOR 5                    ${hijau}║"
    echo -e "║${kuning} [7] CHAT GEMINI                               ${hijau}║"
    echo -e "║${kuning} [0] KELUAR                                    ${hijau}║"
    echo -e "╚══════════════════════════════════════════════╝${reset}"
    echo ""
    echo -e "${biru}[DEV]${reset} ${hijau}HAMZY OFFICIAL${reset}"
    read -p "[PILIH MENU YANG TERSEDIA]: " pilih

    case $pilih in
        1) suntik_tiktok ;;
        2) cek_provider ;;
        3) ascii_gen ;;
        4) info_tools ;;
        5) spam_text ;;
        6) start_bot ;;
        7) chat_gemini ;;
        0) keluar ;;
        *) echo -e "${merah}Pilihan tidak valid!${reset}"; sleep 1; menu ;;
    esac
}

# suntik tiktok
suntik_tiktok() {
    loading
    echo -e "${hijau}sabar cuy${reset}"
    termux-open-url "https://zefoy.com/"
    read -n 1 -s -r -p "[TEKAN ENTER UNTUK KEMBALI KE MENU]"
    menu
}

# Fitur 2 - Cek Provider Nomor (API)
cek_provider() {
    read -p "Masukkan Nomor HP [08××××]: " nomor
    loading
    echo -e "${kuning}Mengecek provider...${reset}"
    hasil=$(curl -s "https://api.veriphone.io/v2/verify?phone=%2B${nomor}&key=054887E117BB49BCAC2ABE05965DBEF2")
    echo -e "${hijau}Hasil: ${reset}$hasil"
    read -n 1 -s -r -p "[TEKAN ENTER UNTUK KEMBALI KE MENU]"
    menu

}

# ascii generator 
ascii_gen() {
    read -p "Masukkan teks: " teks
    loading
    echo -e "${cyan}"
    figlet "$teks"
    echo -e "${reset}"
    read -n 1 -s -r -p "[TEKAN ENTER UNTUK KEMBALI KE MENU]"
    menu

}

# info tools
info_tools() {
    loading
    echo -e "${kuning}HAMZYTOOLS v1.0${reset}"
    echo -e "Dibuat oleh ${hijau}Hamzy Official${reset}"
    echo -e "Terinspirasi Oleh DanxyOfficial"
    echo -e "tools version 1.0"
    read -n 1 -s -r -p "[TEKAN ENTER UNTUK KEMBALI KE MENU]"
    menu

}

# spam text
spam_text() {
    clear
    echo -e "${biru}===== SPAM TEXT TELEGRAM =====${reset}"
    echo "ingat target harus sudah kirim pesan dlm bot nya"
    read -p "Masukkan ID Telegram Target: " chat_id
    read -p "Masukkan Pesan: " pesan
    read -p "Jumlah Spam: " jumlah

    echo -e "${merah}Pilih Mode:${reset}"
    echo "1) spam delay (max100)"
    echo "2) spam fast (max50)"
    read -p "Pilih mode [1/2]: " spam

    if [[ "$mode" == "1" ]]; then
        read -p "Masukkan jeda antar pesan (detik): " delay
    else
        delay=0
    fi

    loading
    echo -e "${merah}Mulai spam...${reset}"

    if [[ "$mode" == "1" ]]; then
        # Mode normal
        for ((i=1; i<=jumlah; i++))
        do
            RESP=$(curl -s -X POST https://api.telegram.org/bot${BOT_TOKEN}/sendMessage \
            -d chat_id="${chat_id}" \
            -d text="${pesan}")

            if [[ "$RESP" != *'"ok":true'* ]]; then
                echo -e "${merah}Gagal mengirim pesan! Bot mungkin diblokir atau ID salah.${reset}"
                break
            fi

            echo -e "[$i/$jumlah] Pesan terkirim."
            if [[ $delay -gt 0 ]]; then
                sleep $delay
            fi
        done

    else
        # Mode spam cepat (paralel)
        for ((i=1; i<=jumlah; i++))
        do
            (
                RESP=$(curl -s -X POST https://api.telegram.org/bot${BOT_TOKEN}/sendMessage \
                -d chat_id="${chat_id}" \
                -d text="${pesan}")

                if [[ "$RESP" != *'"ok":true'* ]]; then
                    echo -e "${merah}Spam dihentikan! Bot mungkin diblokir atau ID salah.${reset}"
                    kill $$
                fi
                echo -e "[$i/$jumlah] Pesan terkirim."
            ) &
        done
        wait
    fi

    echo -e "${biru}Selesai!${reset}"
    read -n 1 -s -r -p "[TEKAN ENTER UNTUK KEMBALI KE MENU]"
    menu

}

# start bot
start_bot() {
   clear
   loading
   termux-open-url "https://t.me/spambotexcuteBot"
       read -n 1 -s -r -p "[TEKAN ENTER UNTUK KEMBALI KE MENU]"
    menu
}

# Chat Gemini
chat_gemini() {
    API_KEY="AIzaSyDL9VxDkkYnicylS3oITxfggIiB0Ea1tWs"
    MODEL="gemini-pro"

    clear
    echo -e "${biru}===== CHAT GEMINI =====${reset}"
    echo -e "${kuning}Ketik 'exit' untuk keluar dari mode chat${reset}"

    while true; do
        echo ""
        read -p "Kamu: " prompt
        if [[ "$prompt" == "exit" ]]; then
            break
        fi

        response=$(curl -s -X POST \
            -H "Content-Type: application/json" \
            -H "x-goog-api-key: AIzaSyDL9VxDkkYnicylS3oITxfggIiB0Ea1tWs" \
            "https://generativelanguage.googleapis.com/v1/models/$MODEL:generateContent" \
            -d "{
                'contents': [{'parts':[{'text':'$prompt'}]}]
            }" | jq -r '.candidates[0].content.parts[0].text')

        if [[ "$response" == "null" || -z "$response" ]]; then
            echo -e "${merah}Gagal mendapatkan jawaban dari Gemini.${reset}"
        else
            echo -e "${hijau}Gemini:${reset} $response"
        fi
    done

    read -n 1 -s -r -p "[TEKAN ENTER UNTUK KEMBALI KE MENU]"
    menu
}

# Keluar
keluar() {
    echo -e "${merah} terimakasih telah menggunakan tools hamzy${reset}"
    exit
}

# Start menu
menu
